ðŸš€ Agent Batch v1 â€” English-First + World Data + VIP Status

Ø§Ù„ØµÙ‚ ÙˆÙ†ÙÙ‘Ø° Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨. Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø£ÙŠ Ø´ÙŠØ¡ Ø®Ø§Ø±Ø¬ Ù‡Ø°Ù‡ Ø§Ù„Ø£ÙˆØ§Ù…Ø±.

0) Assert ROOT (Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·)



cat > /tmp/00_assert_root.sh <<'BASH'#!/usr/bin/env bashset -euo pipefailtrap 'echo; read -r -p "HOLD: Ø§Ø¶ØºØ· Enter Ù„Ù„Ø¥Ù†Ù‡Ø§Ø¡..." _' EXIT

ROOT="/home/runner/workspace"; cd "$ROOT"exists(){ [[ -e "$1" ]] && echo 1 || echo 0; }echo "-- Acceptance --"echo "ROOT=$(pwd)"echo "LIVE=src:$(exists src) package.json:$(exists package.json) next.config.mjs:$(exists next.config.mjs) tsconfig.json:$(exists tsconfig.json)"echo "NOTES=Read-only sanity OK"echo "-- End Acceptance --"

BASH

bash /tmp/00_assert_root.sh

1) P0 Apply â€” English-first + World countries + genders + vip-status API



cat > /tmp/10_p0_apply_english_world.sh <<'BASH'#!/usr/bin/env bashset -euo pipefailtrap 'echo; read -r -p "HOLD: Ø§Ø¶ØºØ· Enter Ù„Ù„Ø¥Ù†Ù‡Ø§Ø¡..." _' EXIT

ROOT="/home/runner/workspace"; cd "$ROOT"

UTC="$(date -u +%Y%m%d-%H%M%S)"

BK="_ops/backups/p0_apply_${UTC}"; mkdir -p "$BK"; changed=()upsert(){ tgt="$1"; tmp="$2"; if [[ -f "$tgt" ]]; then if cmp -s "$tgt" "$tmp"; then rm -f "$tmp"; else mkdir -p "$(dirname "$BK/$tgt")"; cp -a "$tgt" "$BK/$tgt"; mv "$tmp" "$tgt"; changed+=("$tgt"); fi else mkdir -p "$(dirname "$tgt")"; mv "$tmp" "$tgt"; changed+=("$tgt"); fi }# 1) Config stub: English-first flags (Ù…Ø±Ø§Ø¬Ø¹ Ù‚Ø§Ø¯Ù…Ø©)mkdir -p src/configcat > /tmp/app.ts <<'TS'export const DEFAULT_LANG = "en";            // English-first UIexport const AUTO_TRANSLATE = false;         // ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„Ù‡ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¹Ø¨Ø± Feature Flagexport const FREE_FOR_ALL = false;           // Ø¹Ù„Ù… Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„ÙØªØ­ Ø§Ù„Ù‚ÙŠÙˆØ¯ Ù…Ø¤Ù‚ØªÙ‹Ø§

TS

upsert "src/config/app.ts" /tmp/app.ts# 2) API: GET /api/user/vip-status  (JSON Ø³Ù„ÙŠÙ… Ø§Ù„Ø¢Ù†)mkdir -p src/app/api/user/vip-statuscat > /tmp/route.ts <<'TS'

import { NextResponse } from "next/server";export async function GET() {

  return NextResponse.json({ isVip: false, status: { level: "guest" } }, { status: 200 });

}

TS

upsert "src/app/api/user/vip-status/route.ts" /tmp/route.ts# 3) Data: genders (English)mkdir -p src/datacat > /tmp/genders.ts <<'TS'export const GENDERS = ["All","Male","Female","Other"] as const;export type Gender = typeof GENDERS[number];

TS

upsert "src/data/genders.ts" /tmp/genders.ts# 4) Data: countries (English, ISO-3166)if ! grep -q '"world-countries"' package.json 2>/dev/null; then

  corepack enable >/dev/null 2>&1 || true

  pnpm add world-countries >/dev/null 2>&1 || npm i world-countries --no-audit --no-fund >/dev/null 2>&1ficat > /tmp/countries.ts <<'TS'

import countries from "world-countries";export type Country = { code: string; name: string };export const COUNTRIES: Country[] = countries.map((c: any) => ({ code: c.cca2, name: c.name?.common || "" }))

  .filter(c => c.code && c.name)

  .sort((a,b)=> a.name.localeCompare(b.name));export const ALL_COUNTRIES_OPTION: Country = { code: "ALL", name: "All Countries" };

TS

upsert "src/data/countries.ts" /tmp/countries.ts# 5) .gitignore (Ù„Ù…Ù†Ø¹ Ø¯ÙØ¹ Ø§Ù„Ø£Ø±Ø´ÙŠÙØ§Øª ÙˆØ§Ù„Ù†Ø³Ø®)if [[ -f .gitignore ]]; then mkdir -p "$BK/git"; cp -a .gitignore "$BK/git/.gitignore.bak"; ficat > /tmp/gitignore.append <<'GI'# --- DitonaChat ops (agent-safe) ---

_ops/artifacts/

_ops/backups/

_ops/snapshots/

*.log

dist/

build/

GItouch .gitignorewhile read -r line; do [[ -z "$line" ]] && continue; grep -qxF "$line" .gitignore || echo "$line" >> .gitignore; done < /tmp/gitignore.append# 6) Ù…Ø¤Ø´Ø±Ø§Øª Ù‚Ø¨ÙˆÙ„exists(){ [[ -e "$1" ]] && echo 1 || echo 0; }

VAPI=$(exists "src/app/api/user/vip-status/route.ts")

GEND=$(exists "src/data/genders.ts")

CNTR=$(exists "src/data/countries.ts")

SLICE=$(grep -RIn 'slice(-3)' src/components/chat 2>/dev/null | head -1 | awk -F: '{print $1":L"$2}')

QDOCK=$(grep -RIn 'className="absolute right-3 -top-24 z-\[40\]"' src/app/chat/ChatClient.tsx 2>/dev/null | head -1 | awk -F: '{print $1":L"$2}')

HVLN=$(grep -RIn 'H_THRESHOLD|V_THRESHOLD' src/utils 2>/dev/null | awk -F: '{printf "%s:L%s,", $1,$2}' | sed 's/,$//')echo "-- Acceptance --"echo "ROOT=$(pwd)"echo "BACKUP_DIR=$BK"echo "CHANGED_COUNT=${#changed[@]} CHANGED_LIST=${changed[*]:-NONE}"echo "ARTIFACTS=vip_status_api:$VAPI genders:$GEND countries:$CNTR"echo "FEATURES=slice(-3):${SLICE:-NONE}; quick_dock:${QDOCK:-NONE}; media_thresholds:${HVLN:-NONE}"echo "LANG_DEFAULT=en WORLD=ISO-3166 dataset ready"echo "NOTES=P0 applied safely"echo "-- End Acceptance --"

BASH

bash /tmp/10_p0_apply_english_world.sh

2) ØªØ´ØºÙŠÙ„ dev Ø¹Ù„Ù‰ 3000 Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©



cat > /tmp/20_dev_preview_3000.sh <<'BASH'#!/usr/bin/env bashset -euo pipefailtrap 'echo; read -r -p "HOLD: Ø§Ø¶ØºØ· Enter Ù„Ù„Ø¥Ù†Ù‡Ø§Ø¡..." _' EXIT

ROOT="/home/runner/workspace"; cd "$ROOT"

fuser -k 3000/tcp 2>/dev/null || true; pkill -f "next dev" 2>/dev/null || true

corepack enable >/dev/null 2>&1 || true

pnpm exec next dev -p 3000 -H 0.0.0.0 &sleep 6# Ù‚Ø¯ ØªÙ…Ù†Ø¹ Replit curl Ø£Ø­ÙŠØ§Ù†Ù‹Ø§Ø› Ù†Ø­Ø§ÙˆÙ„ Ø¨Ù„Ø·Ù

VS=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:3000/api/user/vip-status || echo "n/a")

HL=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:3000/api/_health || echo "n/a")echo "-- Acceptance --"echo "ROOT=$(pwd)"echo "RUN_MODE=dev PORT=3000"echo "CHECKS=/api/user/vip-status:$VS /api/_health:$HL (visual check in Preview mandatory)"echo "VISUAL=/, /chat, /plans should open"echo "-- End Acceptance --"

BASH

bash /tmp/20_dev_preview_3000.sh

Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù…Ù† Ø§Ù„Ù€Agent Ø¨ØµØ±ÙŠÙ‹Ø§ Ø§Ù„Ø¢Ù†: Ø§ÙØªØ­ Preview Ø¹Ù„Ù‰ 3000 ÙˆØªØ£ÙƒØ¯ Ø£Ù†:



/ Ùˆ/chat Ùˆ/plans ØªÙØªØ­ Ø¨Ø¯ÙˆÙ† Ø£Ø®Ø·Ø§Ø¡ Overlay.

GET /api/user/vip-status ÙŠØ¹ÙŠØ¯ JSON ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­.

3) ØªÙ‚Ø±ÙŠØ± ØªÙ†ÙÙŠØ° Ø¢Ù„ÙŠ (Markdown) â€” Ù…Ø¹ Ù„Ù‚Ø·Ø§Øª



cat > /tmp/90_finalize_agent_report.sh <<'BASH'#!/usr/bin/env bashset -euo pipefailtrap 'echo; read -r -p "HOLD: Ø§Ø¶ØºØ· Enter Ù„Ù„Ø¥Ù†Ù‡Ø§Ø¡..." _' EXITcd /home/runner/workspace

TS="$(date -u +%Y%m%d-%H%M%S)"

OUT="_ops/reports/AGENT_BATCH_V1_${TS}.md"; mkdir -p "$(dirname "$OUT")"

VIP=$(curl -sSf http://localhost:3000/api/user/vip-status || echo '{"error":"preview-blocked"}')

HEALTH=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:3000/api/_health || echo "n/a")cat > "$OUT" <<MD

# Agent Batch v1 â€” English + World + VIP Status  (${TS})



## Changes

- Added \`/api/user/vip-status\` (static JSON).

- Added \`src/data/genders.ts\`.

- Added \`src/data/countries.ts\` (via \`world-countries\`).

- Updated \`.gitignore\` to exclude ops artifacts/backups.



## Verifications

- VIP status API: \`${VIP}\`

- Health endpoint code: \`${HEALTH}\`

- Visual checklist (attach screenshots):

  - Home / âœ…

  - /chat âœ… (no error overlay)

  - /plans âœ…

  - /api/user/vip-status âœ… JSON 200



## Next steps (suggested)

- Wire Filters UI (Gender/Countries) with VIP gating.

- Dynamic PeerHeader + badges.

- Stripe test flow (checkout â†’ webhook â†’ VIP flip).

MDecho "-- Acceptance --"echo "ROOT=$(pwd)"echo "REPORT_FILE=$OUT"echo "NOTES=Attach screenshots from Preview to the report"echo "-- End Acceptance --"

BASH

bash /tmp/90_finalize_agent_report.sh ****** ÙÙŠ ÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹  ÙŠØ¬Ø¨ Ø§Ù† ÙŠØ¨Ø¯Ùˆ Ø§Ù„Ø¬Ù†Ø³ Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ±Ù‡ ÙÙŠ Ø§Ù„Ø§Ù…Ø§ÙƒÙ† Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ø§Ù† ÙŠØ¸Ù‡Ø± Ø¨Ù‡Ø§ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙƒÙ„ Male: â™‚ï¸ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ø¯Ø§ÙƒÙ†.

Female: â™€ï¸ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø­Ù…Ø± Ø§Ù„ÙØ§Ù‚Ø¹.

Couple: ðŸ’‘ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø­Ù…Ø±.

LGBT: ðŸŒˆ Ø¨Ø£Ù„ÙˆØ§Ù† Ù‚ÙˆØ³ Ù‚Ø²Ø­.     Ø§Ø­Ø±Øµ Ø§Ù† Ù‡ÙƒØ°Ø§ Ù…Ø«Ø§Ù„ { Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø­Ù…Ø± Ø§Ù„ÙØ§Ù‚Ø¹â™€ï¸ Female }