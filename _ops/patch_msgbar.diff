*** 1/src/app/chat/components/ChatMessagingBar.tsx
--- 1/src/app/chat/components/ChatMessagingBar.tsx
@@
 import React, { useEffect, useState } from "react";
 
 export default function ChatMessagingBar() {
-  const [open,setOpen]=useState(false);
+  const [open,setOpen]=useState(false);
+  // keep panel above keyboard on mobile using visualViewport
+  useEffect(()=>{
+    const root = document.documentElement;
+    const vv: any = (typeof window!=="undefined" && (window as any).visualViewport) ? (window as any).visualViewport : null;
+    const update = () => {
+      try{
+        const off = vv ? Math.max(0, (window.innerHeight - vv.height - vv.offsetTop)) : 0;
+        root.style.setProperty('--kb-safe', off + 'px');
+      }catch{}
+    };
+    update();
+    if(vv){
+      vv.addEventListener('resize', update, {passive:true});
+      vv.addEventListener('scroll', update, {passive:true});
+      return ()=>{ vv.removeEventListener('resize', update as any); vv.removeEventListener('scroll', update as any); };
+    }
+  },[]);
 
   useEffect(()=>{
     const onOpen = ()=> setOpen(true);
     const onClose = ()=> setOpen(false);
     window.addEventListener("ui:openMessaging", onOpen as any);
     window.addEventListener("ui:closeMessaging", onClose as any);
     return ()=>{ window.removeEventListener("ui:openMessaging",onOpen as any); window.removeEventListener("ui:closeMessaging",onClose as any); };
   },[]);
 
-  return <div className="chat-messages-panel">{/* existing content */}</div>;
+  return (
+    <div className="chat-messages-panel"
+         data-open={open?1:0}
+         aria-hidden={open?false:true}
+         role="region">
+      {/* existing content */}
+    </div>
+  );
 }
*** 1/src/styles/globals.css
--- 1/src/styles/globals.css
@@
 /* existing globals */
 
+/* ---- Chat messaging panel: fixed, above toolbar, keyboard-safe ---- */
+.chat-messages-panel{
+  position: fixed;
+  left: 0; right: 0;
+  bottom: calc(env(safe-area-inset-bottom, 0px) + var(--kb-safe, 0px));
+  max-height: min(45vh, 420px);
+  z-index: 60; /* toolbar يفترض < 60 */
+  transform: translateY(100%);
+  transition: transform .18s ease, opacity .18s ease;
+  opacity: .98;
+  pointer-events: none; /* مغلق افتراضياً */
+}
+.chat-messages-panel[data-open="1"]{
+  transform: translateY(0);
+  pointer-events: auto;
+}
+@media (hover:none){
+  .chat-messages-panel{ max-height: min(50vh, 460px); }
+}
